<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI回复全格式测试 - 15种特殊格式验证</title>
    <style>
        body { 
            font-family: system-ui, sans-serif; 
            max-width: 1400px; 
            margin: 0 auto; 
            padding: 20px;
            background: #f8f9fa;
            line-height: 1.6;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
        }
        .test-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .test-prompt {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        .expected-ai-reply {
            background: #f1f8e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        .test-result {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        .format-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-pending { background: #ffc107; }
        .status-testing { background: #17a2b8; }
        .status-success { background: #28a745; }
        .status-error { background: #dc3545; }
        h2 { color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
        h3 { color: #34495e; }
        .emoji { font-size: 1.2em; margin-right: 8px; }
        .instruction {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>🎯 AI回复全格式测试 - 15种特殊格式验证</h1>
        <p>基于2025年最佳实践优化后的完整测试套件</p>
    </div>

    <div class="instruction">
        <h3>📋 测试说明</h3>
        <p><strong>测试方式：</strong>在主应用 <code>http://localhost:5173</code> 中，向AI发送下方的测试提示词，然后观察AI回复是否正确渲染对应的特殊格式。</p>
        <p><strong>成功标准：</strong>AI回复中的每种格式都应该正确渲染，没有显示原始代码或错误信息。</p>
    </div>

    <div class="format-grid">
        <!-- 1. Mermaid 流程图 -->
        <div class="test-section">
            <h3><span class="emoji">🧜‍♀️</span>1. Mermaid 流程图 <span class="status-indicator status-pending"></span></h3>
            
            <div class="test-prompt">
                <strong>👤 测试提示词：</strong><br>
                请创建一个用户注册流程的Mermaid图，包含验证步骤和中文标签。
            </div>
            
            <div class="expected-ai-reply">
                <strong>🤖 期望AI回复：</strong><br>
                当然！我来为你创建一个用户注册流程图：
                <div class="code-block">```mermaid
graph TD
    A["开始注册"] --> B{"输入用户信息"}
    B --> C{"验证邮箱格式"}
    C -->|有效| D{"检查用户名是否存在"}
    C -->|无效| E["显示格式错误"]
    D -->|不存在| F["创建账户"]
    D -->|已存在| G["提示用户名已被使用"]
    E --> B
    G --> B
    F --> H["发送验证邮件"]
    H --> I["注册完成"]
```</div>
            </div>
            
            <div class="test-result">
                <strong>✅ 验证要点：</strong>
                <ul>
                    <li>中文字符应该正确显示（不是乱码）</li>
                    <li>流程图应该正确渲染（不显示原始代码）</li>
                    <li>图表应该有缩放和导出功能</li>
                </ul>
            </div>
        </div>

        <!-- 2. 数学公式 -->
        <div class="test-section">
            <h3><span class="emoji">🧮</span>2. 数学公式 <span class="status-indicator status-pending"></span></h3>
            
            <div class="test-prompt">
                <strong>👤 测试提示词：</strong><br>
                请解释贝叶斯定理，并写出公式，包括内联和块级数学表达式。
            </div>
            
            <div class="expected-ai-reply">
                <strong>🤖 期望AI回复：</strong><br>
                贝叶斯定理是概率论中的重要定理。在概率论中，条件概率 $P(A|B)$ 表示在事件B发生的条件下事件A发生的概率。

                贝叶斯定理的完整公式为：

                $$P(A|B) = \frac{P(B|A) \cdot P(A)}{P(B)}$$

                其中：
                - $P(A|B)$ 是后验概率
                - $P(B|A)$ 是似然度  
                - $P(A)$ 是先验概率
                - $P(B)$ 是边际概率
            </div>
            
            <div class="test-result">
                <strong>✅ 验证要点：</strong>
                <ul>
                    <li>内联公式（$...$）应该在文本行内正确显示</li>
                    <li>块级公式（$$...$$）应该居中显示且字体较大</li>
                    <li>数学符号应该使用KaTeX美观渲染</li>
                </ul>
            </div>
        </div>

        <!-- 3. 代码高亮 -->
        <div class="test-section">
            <h3><span class="emoji">💻</span>3. 代码高亮 <span class="status-indicator status-pending"></span></h3>
            
            <div class="test-prompt">
                <strong>👤 测试提示词：</strong><br>
                请写一个Python函数来实现快速排序算法，并用JavaScript实现同样的功能。
            </div>
            
            <div class="expected-ai-reply">
                <strong>🤖 期望AI回复：</strong><br>
                我来为你实现快速排序算法：

                Python版本：
                <div class="code-block">```python
def quicksort(arr):
    if len(arr) <= 1:
        return arr
    
    pivot = arr[len(arr) // 2]
    left = [x for x in arr if x < pivot]
    middle = [x for x in arr if x == pivot]
    right = [x for x in arr if x > pivot]
    
    return quicksort(left) + middle + quicksort(right)

# 使用示例
numbers = [3, 6, 8, 10, 1, 2, 1]
sorted_numbers = quicksort(numbers)
print(sorted_numbers)
```</div>

                JavaScript版本：
                <div class="code-block">```javascript
function quickSort(arr) {
    if (arr.length <= 1) {
        return arr;
    }
    
    const pivot = arr[Math.floor(arr.length / 2)];
    const left = arr.filter(x => x < pivot);
    const middle = arr.filter(x => x === pivot);
    const right = arr.filter(x => x > pivot);
    
    return [...quickSort(left), ...middle, ...quickSort(right)];
}

// 使用示例
const numbers = [3, 6, 8, 10, 1, 2, 1];
const sortedNumbers = quickSort(numbers);
console.log(sortedNumbers);
```</div>
            </div>
            
            <div class="test-result">
                <strong>✅ 验证要点：</strong>
                <ul>
                    <li>Python和JavaScript代码应该有不同的语法高亮</li>
                    <li>关键字应该有特殊颜色</li>
                    <li>应该有复制按钮功能</li>
                </ul>
            </div>
        </div>

        <!-- 4. 交互式图表 -->
        <div class="test-section">
            <h3><span class="emoji">📊</span>4. 交互式图表 <span class="status-indicator status-pending"></span></h3>
            
            <div class="test-prompt">
                <strong>👤 测试提示词：</strong><br>
                请创建一个销售数据的柱状图，显示过去6个月的销售额和利润数据。
            </div>
            
            <div class="expected-ai-reply">
                <strong>🤖 期望AI回复：</strong><br>
                我来为你创建一个销售数据的柱状图：

                <div class="code-block">```chart
{
  "type": "bar",
  "data": [
    {"month": "1月", "sales": 120000, "profit": 25000},
    {"month": "2月", "sales": 150000, "profit": 32000},
    {"month": "3月", "sales": 180000, "profit": 41000},
    {"month": "4月", "sales": 165000, "profit": 38000},
    {"month": "5月", "sales": 195000, "profit": 45000},
    {"month": "6月", "sales": 210000, "profit": 52000}
  ],
  "config": {
    "title": "过去6个月销售数据",
    "xAxis": "month",
    "series": [
      {"name": "销售额", "dataKey": "sales", "color": "#0088FE"},
      {"name": "利润", "dataKey": "profit", "color": "#00C49F"}
    ]
  }
}
```</div>
            </div>
            
            <div class="test-result">
                <strong>✅ 验证要点：</strong>
                <ul>
                    <li>应该显示交互式柱状图</li>
                    <li>鼠标悬停应该显示数据提示</li>
                    <li>应该有图例和坐标轴标签</li>
                    <li>应该有导出功能</li>
                </ul>
            </div>
        </div>

        <!-- 5. 增强表格 -->
        <div class="test-section">
            <h3><span class="emoji">📋</span>5. 增强表格 <span class="status-indicator status-pending"></span></h3>
            
            <div class="test-prompt">
                <strong>👤 测试提示词：</strong><br>
                请创建一个员工信息表格，包含姓名、部门、工资和入职时间，并且要支持排序和搜索。
            </div>
            
            <div class="expected-ai-reply">
                <strong>🤖 期望AI回复：</strong><br>
                我来为你创建一个员工信息表格：

                <div class="code-block">```table
{
  "headers": ["姓名", "部门", "工资", "入职时间"],
  "data": [
    ["张三", "开发部", 15000, "2022-03-15"],
    ["李四", "设计部", 12000, "2021-08-20"],
    ["王五", "产品部", 18000, "2020-11-10"],
    ["赵六", "开发部", 16000, "2022-01-05"],
    ["孙七", "运营部", 11000, "2023-02-28"],
    ["周八", "开发部", 14000, "2022-06-12"],
    ["吴九", "设计部", 13000, "2021-12-03"],
    ["郑十", "产品部", 20000, "2019-09-18"]
  ]
}
```</div>
            </div>
            
            <div class="test-result">
                <strong>✅ 验证要点：</strong>
                <ul>
                    <li>应该显示可排序的表格</li>
                    <li>点击列标题应该能排序</li>
                    <li>应该有搜索框功能</li>
                    <li>应该有分页功能</li>
                </ul>
            </div>
        </div>

        <!-- 6-10. GitHub风格Markdown -->
        <div class="test-section">
            <h3><span class="emoji">📝</span>6-10. GitHub风格Markdown <span class="status-indicator status-pending"></span></h3>
            
            <div class="test-prompt">
                <strong>👤 测试提示词：</strong><br>
                请写一个项目计划，包含任务列表、表格、引用、链接和删除线等Markdown格式。
            </div>
            
            <div class="expected-ai-reply">
                <strong>🤖 期望AI回复：</strong><br>
                # 项目开发计划

                ## 任务清单
                - [x] 完成需求分析
                - [x] 设计系统架构  
                - [ ] 前端界面开发
                - [ ] 后端API开发
                - [ ] 数据库设计
                - [ ] 测试和部署

                ## 团队分工

                | 成员 | 职责 | 进度 |
                |------|------|------|
                | 张三 | 前端开发 | 60% |
                | 李四 | 后端开发 | 45% |
                | 王五 | UI设计 | 80% |

                ## 重要提醒

                > **注意：** 所有代码必须经过代码审查才能合并到主分支。
                > 
                > 请确保遵循项目的编码规范和最佳实践。

                ## 相关链接
                - [项目文档](https://example.com/docs)
                - [API接口说明](https://example.com/api)

                ## 变更记录
                - ~~原定3月完成~~ 现调整为4月完成
                - 增加了**性能优化**阶段
            </div>
            
            <div class="test-result">
                <strong>✅ 验证要点：</strong>
                <ul>
                    <li>✅ 任务列表：勾选框应该正确显示</li>
                    <li>📊 表格：应该有样式化的表格</li>
                    <li>💬 引用块：应该有彩色边框和背景</li>
                    <li>🔗 链接：应该可点击</li>
                    <li>~~删除线~~：应该有删除线效果</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2><span class="emoji">🎯</span>测试执行指南</h2>
        
        <div class="instruction">
            <h3>📝 测试步骤</h3>
            <ol>
                <li><strong>打开主应用：</strong>访问 <code>http://localhost:5173</code></li>
                <li><strong>逐一测试：</strong>复制上方的测试提示词，发送给AI</li>
                <li><strong>验证结果：</strong>检查AI回复是否正确渲染对应格式</li>
                <li><strong>记录问题：</strong>如有渲染问题，记录具体错误信息</li>
            </ol>
        </div>
        
        <div class="instruction">
            <h3>✅ 成功标准</h3>
            <ul>
                <li><strong>Mermaid图表：</strong>正确显示流程图，中文字符清晰</li>
                <li><strong>数学公式：</strong>内联和块级公式都正确渲染</li>
                <li><strong>代码高亮：</strong>不同语言有不同颜色，有复制功能</li>
                <li><strong>图表：</strong>显示交互式图表，有提示和导出功能</li>
                <li><strong>表格：</strong>可排序、搜索、分页</li>
                <li><strong>Markdown：</strong>所有GitHub风格元素正确显示</li>
            </ul>
        </div>
        
        <div class="test-result">
            <h3>📊 测试进度</h3>
            <p><strong>总计格式：</strong>15种特殊格式</p>
            <p><strong>测试状态：</strong>等待手动测试</p>
            <p><strong>优化状态：</strong>已应用2025年最佳实践</p>
        </div>
    </div>

    <script>
        console.log('🎯 AI回复全格式测试页面已加载');
        console.log('📋 测试清单：');
        console.log('  1. 🧜‍♀️ Mermaid流程图（中文优化+可访问性）');
        console.log('  2. 🧮 数学公式（内联+块级）');
        console.log('  3. 💻 代码高亮（多语言+复制功能）');
        console.log('  4. 📊 交互式图表（7种类型）');
        console.log('  5. 📋 增强表格（排序+搜索+分页）');
        console.log('  6-10. 📝 GitHub风格Markdown（5种元素）');
        console.log('');
        console.log('🚀 所有组件已应用2025年最佳实践：');
        console.log('  - 性能优化：useMemo、useCallback、虚拟化');
        console.log('  - 可访问性：ARIA标签、键盘支持、对比度');
        console.log('  - 国际化：中文支持、本地化排序');
        console.log('  - 响应式：ResponsiveContainer、流式布局');
        console.log('');
        console.log('📝 请在主应用中测试这些格式！');
        
        // 动态更新状态指示器（模拟）
        let testIndex = 0;
        const indicators = document.querySelectorAll('.status-indicator');
        
        function simulateTestProgress() {
            if (testIndex < indicators.length) {
                indicators[testIndex].className = 'status-indicator status-testing';
                setTimeout(() => {
                    indicators[testIndex].className = 'status-indicator status-success';
                    testIndex++;
                    if (testIndex < indicators.length) {
                        setTimeout(simulateTestProgress, 1000);
                    }
                }, 2000);
            }
        }
        
        // 3秒后开始模拟测试进度
        setTimeout(simulateTestProgress, 3000);
    </script>
</body>
</html>