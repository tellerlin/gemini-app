<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIå›å¤Mermaidæµ‹è¯•</title>
    <style>
        body { 
            font-family: system-ui, sans-serif; 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 20px;
            background: #f8f9fa;
        }
        .chat-container { 
            background: white; 
            border-radius: 12px; 
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .message { 
            margin: 20px 0; 
            padding: 15px; 
            border-radius: 8px;
        }
        .user-message { 
            background: #e3f2fd; 
            border-left: 4px solid #2196f3;
            margin-left: 20px;
        }
        .ai-message { 
            background: #f1f8e9; 
            border-left: 4px solid #4caf50;
            margin-right: 20px;
        }
        .markdown-content {
            line-height: 1.6;
        }
        h3 { color: #333; margin: 10px 0; }
        pre { 
            background: #f5f5f5; 
            padding: 15px; 
            border-radius: 6px; 
            overflow-x: auto;
            border: 1px solid #ddd;
        }
        .test-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 15px;
            margin: 20px 0;
            color: #856404;
        }
    </style>
</head>
<body>
    <h1>ğŸ¤– AIå›å¤Mermaidæ¸²æŸ“æµ‹è¯•</h1>
    
    <div class="test-info">
        <h3>ğŸ“‹ æµ‹è¯•è¯´æ˜</h3>
        <p>è¿™ä¸ªé¡µé¢æ¨¡æ‹ŸAIå›å¤åŒ…å«ä¸­æ–‡Mermaidå›¾è¡¨çš„åœºæ™¯ã€‚æˆ‘ä»¬ä¼šæµ‹è¯•ä»¥ä¸‹å†…å®¹ï¼š</p>
        <ul>
            <li>âœ… ç”¨æˆ·è¯¢é—®åˆ›å»ºæµç¨‹å›¾</li>
            <li>âœ… AIå›å¤åŒ…å«ä¸­æ–‡çš„Mermaidä»£ç </li>
            <li>âœ… éªŒè¯OptimizedMermaidDiagramç»„ä»¶æ˜¯å¦æ­£ç¡®æ¸²æŸ“</li>
        </ul>
    </div>

    <div class="chat-container">
        <div class="message user-message">
            <h3>ğŸ‘¤ ç”¨æˆ·</h3>
            <p>ä½ èƒ½å¸®æˆ‘åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç™»å½•æµç¨‹çš„Mermaidå›¾å—ï¼ŸåŒ…å«éªŒè¯æ­¥éª¤å’Œé”™è¯¯å¤„ç†ã€‚</p>
        </div>

        <div class="message ai-message">
            <h3>ğŸ¤– AIåŠ©æ‰‹</h3>
            <div class="markdown-content">
                <p>å½“ç„¶å¯ä»¥ï¼æˆ‘æ¥ä¸ºä½ åˆ›å»ºä¸€ä¸ªè¯¦ç»†çš„ç”¨æˆ·ç™»å½•æµç¨‹å›¾ï¼ŒåŒ…æ‹¬éªŒè¯æ­¥éª¤å’Œé”™è¯¯å¤„ç†æœºåˆ¶ï¼š</p>
                
                <pre><code class="language-mermaid">graph TD
    A[å¼€å§‹] --> B{ç”¨æˆ·è¾“å…¥ç™»å½•ä¿¡æ¯?};
    B --> C{éªŒè¯å‡­æ®};
    C --> D{å‡­æ®æœ‰æ•ˆ?};
    D -- æ˜¯ --> E[ç™»å½•æˆåŠŸ];
    D -- å¦ --> F[æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯];
    F --> B; /* å¾ªç¯å›Bï¼Œè®©ç”¨æˆ·é‡æ–°å°è¯• */
    E --> G[ç»“æŸ];</code></pre>

                <p>è¿™ä¸ªæµç¨‹å›¾åŒ…å«äº†å®Œæ•´çš„ç™»å½•éªŒè¯æµç¨‹ï¼š</p>
                <ul>
                    <li><strong>è¾“å…¥é˜¶æ®µ</strong>ï¼šç”¨æˆ·è¾“å…¥ç™»å½•ä¿¡æ¯</li>
                    <li><strong>éªŒè¯é˜¶æ®µ</strong>ï¼šç³»ç»ŸéªŒè¯ç”¨æˆ·å‡­æ®</li>
                    <li><strong>æˆåŠŸè·¯å¾„</strong>ï¼šå‡­æ®æœ‰æ•ˆæ—¶ç›´æ¥ç™»å½•æˆåŠŸ</li>
                    <li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå‡­æ®æ— æ•ˆæ—¶æ˜¾ç¤ºé”™è¯¯å¹¶å…è®¸é‡æ–°å°è¯•</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="test-info">
        <h3>ğŸ” æµ‹è¯•ç»“æœè§‚å¯Ÿ</h3>
        <p>è¯·è§‚å¯Ÿä¸Šé¢çš„AIå›å¤ä¸­æ˜¯å¦æ­£ç¡®æ¸²æŸ“äº†Mermaidæµç¨‹å›¾ã€‚å¦‚æœçœ‹åˆ°æ­£ç¡®çš„å›¾è¡¨ï¼Œè¯´æ˜ä¿®å¤æˆåŠŸï¼›å¦‚æœæ˜¾ç¤ºé”™è¯¯æˆ–"å›¾è¡¨æ¸²æŸ“å¤±è´¥"ï¼Œè¯´æ˜è¿˜éœ€è¦è¿›ä¸€æ­¥è°ƒè¯•ã€‚</p>
    </div>

    <script type="module">
        // æ¨¡æ‹ŸReactåº”ç”¨çš„æ¸²æŸ“é€»è¾‘
        import { marked } from 'https://cdn.skypack.dev/marked';
        
        // è¿™é‡Œåº”è¯¥è°ƒç”¨æˆ‘ä»¬çš„ModernMarkdownRendererç»„ä»¶
        // ä½†ä¸ºäº†ç®€åŒ–æµ‹è¯•ï¼Œæˆ‘ä»¬ç›´æ¥æ£€æŸ¥ä»£ç æ˜¯å¦èƒ½è¢«æ­£ç¡®å¤„ç†
        
        const mermaidCode = `graph TD
    A[å¼€å§‹] --> B{ç”¨æˆ·è¾“å…¥ç™»å½•ä¿¡æ¯?};
    B --> C{éªŒè¯å‡­æ®};
    C --> D{å‡­æ®æœ‰æ•ˆ?};
    D -- æ˜¯ --> E[ç™»å½•æˆåŠŸ];
    D -- å¦ --> F[æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯];
    F --> B; /* å¾ªç¯å›Bï¼Œè®©ç”¨æˆ·é‡æ–°å°è¯• */
    E --> G[ç»“æŸ];`;

        console.log('ğŸ§œâ€â™€ï¸ Mermaidä»£ç æµ‹è¯•:');
        console.log('åŸå§‹ä»£ç :', mermaidCode);
        
        // è¿™é‡Œæˆ‘ä»¬æ— æ³•ç›´æ¥å¯¼å…¥fixMermaidSyntaxï¼Œä½†å¯ä»¥æ£€æŸ¥
        // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™æ®µä»£ç ä¼šé€šè¿‡OptimizedMermaidDiagramç»„ä»¶å¤„ç†
        
        document.addEventListener('DOMContentLoaded', () => {
            const testResult = document.createElement('div');
            testResult.className = 'test-info';
            testResult.innerHTML = `
                <h3>ğŸ¯ æµ‹è¯•æ‰§è¡ŒçŠ¶æ€</h3>
                <p>âœ… é¡µé¢åŠ è½½å®Œæˆ</p>
                <p>âœ… Mermaidä»£ç å·²æ’å…¥åˆ°AIå›å¤ä¸­</p>
                <p>ğŸ”„ åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒOptimizedMermaidDiagramç»„ä»¶ä¼šå¤„ç†è¿™æ®µä»£ç </p>
                <p>ğŸ“ è¯·åœ¨ä¸»åº”ç”¨ http://localhost:5173 ä¸­æµ‹è¯•å®é™…æ¸²æŸ“æ•ˆæœ</p>
            `;
            document.body.appendChild(testResult);
        });
    </script>
</body>
</html>